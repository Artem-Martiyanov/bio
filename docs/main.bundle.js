"use strict";(self.webpackChunkbio=self.webpackChunkbio||[]).push([[179],{931:(t,e,s)=>{var i={};s.r(i),s.d(i,{works:()=>g});const n=(t,e)=>Math.random()*(e-t)+t,o=(t,e)=>{const s=document.createElement(t);return s.classList.add(e),s};class a{constructor(t,e){this.WIDTH=t,this.HEIGHT=e,this.wrapper=o("div","canvas__wrapper"),this.canvas=this.#t(t,e),this.wrapper.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d")}#t=(t,e)=>{const s=o("canvas","canvas");return s.width=t,s.height=e,s.style=`width: ${t}px; height: ${e}px;`,s};clear(){this.ctx.clearRect(0,0,this.WIDTH,this.HEIGHT)}render({position:t,body:e}){e.forEach((e=>{const s=+t.x+ +e.offset.x||0,i=+t.y+ +e.offset.y||0;this.ctx.beginPath(),this.ctx.moveTo(s,i),e.figure.forEach((([t,e])=>{this.ctx.lineTo(s+t,i+e)})),e.isClose&&this.ctx.closePath(),e.color?(e.color.fill&&(this.ctx.fillStyle=e.color.fill,this.ctx.fill()),e.color.stroke&&(this.ctx.strokeStyle=e.color.stroke,this.ctx.stroke())):(this.ctx.fillStyle=this.ctx.strokeStyle="black",this.ctx.fill(),this.ctx.stroke())}))}destroy(){this.wrapper.parentNode.removeChild(this.wrapper)}}class r{constructor(t,e){this.model={position:e,body:[]}}direction=1;setPosition(t,e){this.model.body.forEach((s=>{this.model.position.x=s.offset.x+t,this.model.position.y=s.offset.y+e}))}isInclude(t,e){let s=!1;const i=this.model.body[0].figure;let n=i.length-1;for(let o=0;o<i.length;o++){let a=i[n][0]+this.model.position.x,r=i[n][1]+this.model.position.y,l=i[o][0]+this.model.position.x,c=i[o][1]+this.model.position.y;(c<=e&&e<r||r<=e&&e<c)&&t>(a-l)*(e-c)/(r-c)+l&&(s=!s),n=o}return s}}class l extends r{constructor(t,e,s){super(),this.model={position:s,body:[{figure:[[0,0],[t,0],[t,t],[0,t]],offset:{x:0,y:0},color:{fill:e[0]?.fill||null,stroke:e[0]?.stroke||null},isClose:!0},{figure:[[0,0],[.25*t,.25*t],[.25*t,1.25*t],[0,t]],offset:{x:t,y:0},color:{fill:e[1]?.fill||null,stroke:e[1]?.stroke||null},isClose:!1},{figure:[[0,0],[t,0],[1.25*t,.25*t],[.25*t,.25*t]],offset:{x:0,y:t},color:{fill:e[2]?.fill||null,stroke:e[2]?.stroke||null},isClose:!1}]}}}class c extends r{constructor(t,e,s){super(),this.model={position:s,body:[{figure:[[0,0],[.35*t,-.75*t],[1.35*t,-.75*t],[.7*t+t,0],[1.35*t,.75*t],[.35*t,.75*t]],offset:{x:0,y:0},color:{fill:e[0]?.fill||null,stroke:e[0]?.stroke||null},isClose:!0},{figure:[[0,0],[.7*t,1.5*t],[.35*t,2.2*t],[-.35*t,.75*t]],offset:{x:1.7*t,y:0},color:{fill:e[1]?.fill||null,stroke:e[1]?.stroke||null},isClose:!1},{figure:[[0,0],[t,0],[1.7*t,1.45*t],[.7*t,1.45*t]],offset:{x:.35*t,y:.75*t},color:{fill:e[2]?.fill||null,stroke:e[2]?.stroke||null},isClose:!1}]}}}class h{constructor(t="cube",e,s,i){this.parent=document.querySelector("[data-background]"),this.parent&&(this.parentWidth=this.parent.clientWidth,this.parentHeight=this.parent.clientHeight,this.facetSize=e,this.countCellsX=Math.ceil(this.parentWidth/this.facetSize)+1,this.countCellsY=Math.ceil(this.parentHeight/this.facetSize)+2,this.canvasWidth=this.countCellsX*this.facetSize,this.canvasHeight=this.countCellsY*this.facetSize,this.canvas=new a(this.canvasWidth,this.canvasHeight),this.cellColors=s,this.speed=i/100,this.mode=t,this.cells=this.#e(),requestAnimationFrame(this.#s.bind(this)),document.addEventListener("pointermove",this.#i.bind(this)),this.parent.style.overflow="hidden",this.parent.insertAdjacentElement("afterbegin",this.canvas.wrapper))}#i(t){"cube"===this.mode?(this.mouseX=Math.floor(t.x/this.facetSize),this.mouseY=Math.floor(t.y/this.facetSize)):(this.mouseX=Math.floor(t.x),this.mouseY=Math.floor(t.y))}#e(){const t=[];if("cube"===this.mode)for(let e=0;e<this.canvasHeight;e+=this.facetSize){const s=[];for(let t=0;t<this.canvasWidth;t+=this.facetSize){const i=n(-1,.15*this.facetSize).toFixed(2),o={x:t-i,y:e-i};s.push(new l(this.facetSize,this.cellColors,o))}t.push(s)}if("hex"===this.mode)for(let e=0;e<this.canvasHeight;e+=1.5*this.facetSize){const s=[];for(let t=0;t<this.canvasWidth;t+=1.35*this.facetSize){const i=n(-1,.15*this.facetSize).toFixed(2);let o=0;o=t/(1.35*this.facetSize)%2==0?e+.75*this.facetSize:e;const a={x:t-i,y:o-i};s.push(new c(this.facetSize,this.cellColors,a))}t.push(s)}return t}#n(){this.cells.forEach(((t,e)=>{t.forEach(((t,s)=>{let i=this.speed*t.direction,o=0,a=1;"hex"===this.mode&&(a=1.35),o=t.model.position.x-s*this.facetSize*a,o<-1*n(.1*this.facetSize,.15*this.facetSize)?t.direction=-1:o>0&&(t.direction=1),t.hovered="cube"===this.mode?s===this.mouseX&&e===this.mouseY:t.isInclude(this.mouseX,this.mouseY),t?.hovered&&o<.1*this.facetSize&&(t.model.position.x+=4,t.model.position.y+=4),t?.hovered||(t.model.position.y-=i,t.model.position.x-=i)}))}))}#s(){this.canvas.clear(),this.#n(),this.cells.forEach((t=>{t.forEach((t=>{this.canvas.render(t.model)}))})),requestAnimationFrame(this.#s.bind(this))}destroy(){document.removeEventListener("pointermove",this.#i),this.canvas.destroy()}}const d=(t,e)=>Math.round(t-.5+Math.random()*(e-t+1)),u=(t,e,s)=>{const i=`\n    border-radius: 50%;\n    width: ${t}vmax;\n    height: ${t}vmax;\n    border: 3px solid ${e};\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 1000;\n    box-shadow: ${s} 0 0 150px 10px ${e};\n  `,n=document.createElement("div");n.style=i,document.body.insertAdjacentElement("afterbegin",n)};class p{constructor(t,e,s,i,n,o){this.parent=document.querySelector("[data-particle-effect]"),this.minRadius=i,this.maxRadius=n,this.parent&&("setting"===o?(u(2*i,"red",""),u(2*n,"blue","inset")):(this.particle=((t,e,s)=>{if(t<=e)throw new Error(`sizeDispersion: ${e} should not be more than size: ${t}`);const i=document.createElement("div"),n=d(-2,2);return i.classList.add("particle"),i.style.width=t+n+"px",i.style.height=t+n+"px",i.style.background=s,i})(t,e,s),this.parent.insertAdjacentElement("afterbegin",this.particle),window.setTimeout((()=>this.#o()),0),this.particle.addEventListener("transitionend",this.#a)))}#o(){const t=d(this.minRadius,this.maxRadius),e=d(0,360);this.particle.style.transform=`rotateZ(${e}deg) translateX(${t}vmax)`,this.particle.style.opacity="0"}#a(t){t.target.parentNode&&t.target.parentNode.removeChild(t.target)}}class f{constructor(t,e,s,i=100,n,o,a){this.prevFramesTime=null,this.spawnDelay=i,this.settings=[t,e,s,n,o,a],"setting"===a?new p(...this.settings):window.requestAnimationFrame(this.#r.bind(this))}#r(t){this.prevFramesTime||(this.prevFramesTime=t),t-this.prevFramesTime>=this.spawnDelay&&(new p(...this.settings),this.prevFramesTime=t),window.requestAnimationFrame(this.#r.bind(this))}}const m=class{constructor(t,e){this.store=t,this.name=e,this.url="https://portfolio-ee6bc-default-rtdb.europe-west1.firebasedatabase.app/"}initState(){return{}}getState(){return this.store.getState()[this.name]}setState(t){this.store.setState({...this.store.getState(),[this.name]:t})}async load(){const t=await fetch(`${this.url}${this.name}.json`,{method:"GET",headers:{"Content-Type":"application/json"}});this.setState(await t.json())}async upload(t){const e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};await fetch(`${this.url}${this.name}.json`,e),this.setState({...this.getState(),...t})}async update(t){const e={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return await fetch(`${this.url}${this.name}.json`,e)}};const g=class extends m{initState(){return{}}getList(){const t=this.getState();return Object.keys(t).map((e=>({...t[e],id:e})))}async iterateView(t){let e=this.getList().find((e=>e.deployLink===t));const s=this.getState(),i={[e.id]:{...s[e.id],view:++e.view}};await this.update(i)}};const w=new class{constructor(t={}){this.state=t,this.actions={};for(const t of Object.keys(i))this.actions[t]=new i[t](this,t),this.state[t]=this.actions[t].initState()}getState(){return this.state}setState(t){this.state=t}},v={el:document.querySelector(".burger"),nav:document.querySelector(".nav"),toggle:function(){this.el.classList.toggle("burger--active"),this.nav.classList.toggle("nav--toggle")}},y={el:document.querySelector(".intro-page__dialog"),show:function(){this.el.classList.add("intro-page__dialog--down")}},k={el:document.querySelector(".works-page__electrician"),show:function(){this.el.classList.add("works-page__electrician--shown")},reset:function(){this.el.classList.remove("works-page__electrician--shown")}},b={el:document.querySelector('[data-type="lamp-switcher"]'),disable:function(){this.el.disabled=!0},enable:function(){this.el.disabled=!1}},x={el:document.querySelector(".lamp"),change:function(t=(()=>{})){this.el.classList.add("lamp--change"),this.el.addEventListener("animationend",(e=>{"lamp-change"===e.animationName&&(this.el.classList.remove("lamp--change"),t())}))},toggle:function(){this.el.classList.toggle("lamp--toggle")}};const S={el:document.querySelector(".works"),render:function(){this.el&&w.actions.works.getList().map((t=>{this.el.appendChild((t=>{const e=document.createElement("li");return e.classList.add("works__item"),e.innerHTML=`\n        <div class="works__content">\n          <picture>\n            <source srcset="${(t=>{const e=t.split(".");return e.pop(),e.push(".webp"),e.join("")})(t.image)}">\n            <img class="works__image" src="${t.image}" alt="${t.title}.">\n          </picture>\n          <div class="works__inner">\n            <h2 class="works__title"><span>&#60; </span>${t.title}<span> &#62;</span></h2>\n            <p class="works__description">${t.description}</p>\n            <footer class="works__links">\n              <a class="works__link" href="${t.deployLink}" target="_blank">\n                <span class="visually-hidden">Опубликованная версия.</span>\n                <svg width="40" height="40">\n                  <use href="./images/stack.svg#out-link"></use>\n                </svg>\n              </a>\n              <a class="works__link" href="${t.ghLink}" target="_blank">\n                <span class="visually-hidden">Проект на гитхаб.</span>\n                <svg width="40" height="40">\n                  <use href="./images/stack.svg#github"></use>\n                </svg>\n              </a>\n              <span class="works__view">\n                <span class="visually-hidden">Количество просмотров.</span>\n                <span class="works__counter">${t.view}</span>\n              </span>\n            </footer>\n          </div>\n        </div>\n  `,e})(t))}))},iterateView:function(t){const e=t.querySelector(".works__counter");e.innerText=Number(e.innerText)+1}};let _=0;const C=t=>{const e=t.target.dataset.type;if("morpheus"===e&&y.show(),("burger"===e||"nav"===e||t.target.closest('[data-type="burger"]'))&&v.toggle(),"lamp-switcher"===e&&(x.toggle(),_>=1&&k.show(),_>4&&(b.disable(),x.change((()=>{b.enable(),k.reset(),_=0}))),_++),t.target.closest(".works__link")){const e=t.target.closest(".works__inner"),s=e.querySelector(".works__link").getAttribute("href");"viewed"!==localStorage.getItem(s)&&w.actions.works.iterateView(s).then((()=>{localStorage.setItem(s,"viewed"),S.iterateView(e)}))}};const L={el:document.querySelector(".header"),darken:function(){this.el&&this.el.classList.add("header--scrolled")},lighten:function(){this.el&&this.el.classList.remove("header--scrolled")}},$=()=>{window.scrollY>5?L.darken():L.lighten()};const z={render:function(){w.actions.works.load().then((()=>{S.render()}))}};new h("cube",window.innerWidth>=768?80:50,[{fill:"#175b39",stroke:"#2fa86b"},{fill:"#43f59c"},{fill:"#0d3321"}],5),new f(15,10,"#43f59c",250,20,50,""),document.addEventListener("mousedown",C),document.addEventListener("scroll",$),z.render()}},t=>{var e;e=931,t(t.s=e)}]);